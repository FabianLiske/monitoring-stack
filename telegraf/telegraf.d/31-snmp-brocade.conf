# 31-snmp-brocade.conf
[[inputs.snmp]]
  agents       = ["udp://192.168.10.27:161"]
  name         = "brocade_icx"
  timeout      = "5s"
  retries      = 3
  version      = 3
  sec_name     = "telegraf"
  sec_level    = "authPriv"
  auth_protocol = "SHA"
  auth_password = "${BROCADE_AUTH_PASS}"
  priv_protocol = "AES"
  priv_password = "${BROCADE_PRIV_PASS}"

  # MIB-Auflösung (Standardpfad der meisten Distros)
  path = ["/usr/share/snmp/mibs"]

  [inputs.snmp.tags]
    domain = "network"

  # -------- Identity / System ----------
  [[inputs.snmp.field]]
    name = "sysName"
    oid  = "1.3.6.1.2.1.1.5.0" # sysName
  [[inputs.snmp.field]]
    name = "sysUpTime"
    oid  = "1.3.6.1.2.1.1.3.0" # sysUpTime

  # -------- CPU / Memory (FOUNDRY-SN-AGENT-MIB) ----------
  [[inputs.snmp.table]]
    name = "icx_cpu"
    index_as_tag = true
    oid  = "1.3.6.1.4.1.1991.1.1.2.11.2.1" # snCpuProcessEntry
    [[inputs.snmp.table.field]]
      name = "proc_name"
      oid  = "1.3.6.1.4.1.1991.1.1.2.11.2.1.1" # snCpuProcessName
    [[inputs.snmp.table.field]]
      name = "cpu_5sec"
      oid  = "1.3.6.1.4.1.1991.1.1.2.11.2.1.2" # snCpuProcess5SecUtil
    [[inputs.snmp.table.field]]
      name = "cpu_1min"
      oid  = "1.3.6.1.4.1.1991.1.1.2.11.2.1.3" # snCpuProcess1MinUtil
    [[inputs.snmp.table.field]]
      name = "cpu_5min"
      oid  = "1.3.6.1.4.1.1991.1.1.2.11.2.1.4" # snCpuProcess5MinUtil
    [[inputs.snmp.table.field]]
      name = "cpu_15min"
      oid  = "1.3.6.1.4.1.1991.1.1.2.11.2.1.5" # snCpuProcess15MinUtil

  [[inputs.snmp.field]]
    name = "dram_total_kb"
    oid  = "1.3.6.1.4.1.1991.1.1.2.12.4.2" # snAgSystemDRAMTotal
  [[inputs.snmp.field]]
    name = "dram_free_kb"
    oid  = "1.3.6.1.4.1.1991.1.1.2.12.4.3" # snAgSystemDRAMFree

  # -------- PoE (FOUNDRY-SN-AGENT-MIB) ----------
  # Global
  [[inputs.snmp.field]]
    name = "poe_capacity_mw"
    oid  = "1.3.6.1.4.1.1991.1.1.2.14.1.1" # snAgentPoeGblPowerCapacityTotal
  [[inputs.snmp.field]]
    name = "poe_free_mw"
    oid  = "1.3.6.1.4.1.1991.1.1.2.14.1.2" # snAgentPoeGblPowerCapacityFree

  # Pro Port (Portverbrauch, Klasse, Priorität)
  [[inputs.snmp.table]]
    name = "icx_poe_port"
    index_as_tag = true
    oid  = "1.3.6.1.4.1.1991.1.1.2.14.2.2.1" # PoE port table
    [[inputs.snmp.table.field]]
      name = "ifIndex"
      oid  = "1.3.6.1.4.1.1991.1.1.2.14.2.2.1.1" # snAgentPoePortNumber (ifIndex)
    [[inputs.snmp.table.field]]
      name = "poe_consumed_mw"
      oid  = "1.3.6.1.4.1.1991.1.1.2.14.2.2.1.6" # snAgentPoePortConsumed
    [[inputs.snmp.table.field]]
      name = "poe_priority"
      oid  = "1.3.6.1.4.1.1991.1.1.2.14.2.2.1.5" # snAgentPoePortPriority
    [[inputs.snmp.table.field]]
      name = "poe_pd_class"
      oid  = "1.3.6.1.4.1.1991.1.1.2.14.2.2.1.8" # snAgentPoePortPDClass

  # -------- Interfaces (IF-MIB / IFX) ----------
  [[inputs.snmp.table]]
    name         = "if_basic"
    index_as_tag = true
    oid          = "1.3.6.1.2.1.2.2.1" # ifTable

    [[inputs.snmp.table.field]]
      name = "ifDescr"
      is_tag = true
      oid  = "1.3.6.1.2.1.2.2.1.2"
    [[inputs.snmp.table.field]]
      name = "ifType"
      oid  = "1.3.6.1.2.1.2.2.1.3"
    [[inputs.snmp.table.field]]
      name = "ifMtu"
      oid  = "1.3.6.1.2.1.2.2.1.4"
    [[inputs.snmp.table.field]]
      name = "ifSpeed"
      oid  = "1.3.6.1.2.1.2.2.1.5"
    [[inputs.snmp.table.field]]
      name = "ifPhysAddress"
      oid  = "1.3.6.1.2.1.2.2.1.6"
    [[inputs.snmp.table.field]]
      name = "ifAdminStatus"
      oid  = "1.3.6.1.2.1.2.2.1.7"
    [[inputs.snmp.table.field]]
      name = "ifOperStatus"
      oid  = "1.3.6.1.2.1.2.2.1.8"
    [[inputs.snmp.table.field]]
      name = "ifLastChange"
      oid  = "1.3.6.1.2.1.2.2.1.9"
    [[inputs.snmp.table.field]]
      name = "ifInErrors"
      oid  = "1.3.6.1.2.1.2.2.1.14"
    [[inputs.snmp.table.field]]
      name = "ifOutErrors"
      oid  = "1.3.6.1.2.1.2.2.1.20"
    [[inputs.snmp.table.field]]
      name = "ifInDiscards"
      oid  = "1.3.6.1.2.1.2.2.1.13"
    [[inputs.snmp.table.field]]
      name = "ifOutDiscards"
      oid  = "1.3.6.1.2.1.2.2.1.19"

  [[inputs.snmp.table]]
    name         = "if_x"
    index_as_tag = true
    oid          = "1.3.6.1.2.1.31.1.1.1" # ifXTable

    [[inputs.snmp.table.field]]
      name = "ifName"
      is_tag = true
      oid  = "1.3.6.1.2.1.31.1.1.1.1"
    [[inputs.snmp.table.field]]
      name = "ifAlias"
      is_tag = true
      oid  = "1.3.6.1.2.1.31.1.1.1.18"
    [[inputs.snmp.table.field]]
      name = "ifHighSpeed"
      oid  = "1.3.6.1.2.1.31.1.1.1.15"
    [[inputs.snmp.table.field]]
      name = "ifHCInOctets"
      oid  = "1.3.6.1.2.1.31.1.1.1.6"
    [[inputs.snmp.table.field]]
      name = "ifHCOutOctets"
      oid  = "1.3.6.1.2.1.31.1.1.1.10"
    [[inputs.snmp.table.field]]
      name = "ifHCInUcastPkts"
      oid  = "1.3.6.1.2.1.31.1.1.1.7"
    [[inputs.snmp.table.field]]
      name = "ifHCOutUcastPkts"
      oid  = "1.3.6.1.2.1.31.1.1.1.11"
    [[inputs.snmp.table.field]]
      name = "ifHCInMulticastPkts"
      oid  = "1.3.6.1.2.1.31.1.1.1.8"
    [[inputs.snmp.table.field]]
      name = "ifHCInBroadcastPkts"
      oid  = "1.3.6.1.2.1.31.1.1.1.9"
    [[inputs.snmp.table.field]]
      name = "ifHCOutMulticastPkts"
      oid  = "1.3.6.1.2.1.31.1.1.1.12"
    [[inputs.snmp.table.field]]
      name = "ifHCOutBroadcastPkts"
      oid  = "1.3.6.1.2.1.31.1.1.1.13"
    [[inputs.snmp.table.field]]
      name = "ifCounterDiscontinuityTime"
      oid  = "1.3.6.1.2.1.31.1.1.1.19"

  # -------- L2-Qualität (EtherLike-MIB) ----------
  [[inputs.snmp.table]]
    name = "etherlike"
    index_as_tag = true
    oid  = "1.3.6.1.2.1.10.7.2.1" # dot3StatsEntry
    [[inputs.snmp.table.field]]
      name = "dot3StatsAlignmentErrors"
      oid  = "1.3.6.1.2.1.10.7.2.1.2"
    [[inputs.snmp.table.field]]
      name = "dot3StatsFCSErrors"
      oid  = "1.3.6.1.2.1.10.7.2.1.3"
    [[inputs.snmp.table.field]]
      name = "dot3StatsLateCollisions"
      oid  = "1.3.6.1.2.1.10.7.2.1.13"
    [[inputs.snmp.table.field]]
      name = "dot3StatsExcessiveCollisions"
      oid  = "1.3.6.1.2.1.10.7.2.1.12"
    [[inputs.snmp.table.field]]
      name = "dot3StatsInternalMacTransmitErrors"
      oid  = "1.3.6.1.2.1.10.7.2.1.16"
    [[inputs.snmp.table.field]]
      name = "dot3StatsInternalMacReceiveErrors"
      oid  = "1.3.6.1.2.1.10.7.2.1.17"
    [[inputs.snmp.table.field]]
      name = "dot3StatsSymbolErrors"
      oid  = "1.3.6.1.2.1.10.7.2.1.18"

  # -------- STP (BRIDGE-MIB) ----------
  [[inputs.snmp.field]]
    name = "dot1dStpTimeSinceTopologyChange"
    oid  = "1.3.6.1.2.1.17.2.3"
  [[inputs.snmp.field]]
    name = "dot1dStpTopologyChanges"
    oid  = "1.3.6.1.2.1.17.2.4"

  [[inputs.snmp.table]]
    name = "stp_port"
    index_as_tag = true
    oid  = "1.3.6.1.2.1.17.2.15.1" # dot1dStpPortEntry
    [[inputs.snmp.table.field]]
      name = "dot1dStpPortState"
      oid  = "1.3.6.1.2.1.17.2.15.1.3"
    [[inputs.snmp.table.field]]
      name = "dot1dStpPortPathCost"
      oid  = "1.3.6.1.2.1.17.2.15.1.5"
    [[inputs.snmp.table.field]]
      name = "dot1dStpPortForwardTransitions"
      oid  = "1.3.6.1.2.1.17.2.15.1.11"

  # -------- LLDP (Local + Remote) ----------
  [[inputs.snmp.field]]
    name = "lldpLocSysName"
    oid  = "1.0.8802.1.1.2.1.3.3.0"

  [[inputs.snmp.table]]
    name = "lldp_loc_port"
    index_as_tag = true
    oid  = "1.0.8802.1.1.2.1.3.7.1" # lldpLocPortEntry
    [[inputs.snmp.table.field]]
      name = "lldpLocPortId"
      oid  = "1.0.8802.1.1.2.1.3.7.1.3"
    [[inputs.snmp.table.field]]
      name = "lldpLocPortDesc"
      oid  = "1.0.8802.1.1.2.1.3.7.1.4"

  [[inputs.snmp.table]]
    name         = "lldp_rem"
    index_as_tag = true
    oid          = "1.0.8802.1.1.2.1.4.1" # lldpRemTable
    [[inputs.snmp.table.field]]
      name = "lldpRemSysName"
      oid  = "1.0.8802.1.1.2.1.4.1.1.9"
    [[inputs.snmp.table.field]]
      name = "lldpRemPortDesc"
      oid  = "1.0.8802.1.1.2.1.4.1.1.8"
    [[inputs.snmp.table.field]]
      name = "lldpRemChassisId"
      oid  = "1.0.8802.1.1.2.1.4.1.1.5"

  # -------- ENV-Sensoren (ENTITY-SENSOR-MIB) ----------
  [[inputs.snmp.table]]
    name = "entity_sensor"
    index_as_tag = true
    oid  = "1.3.6.1.2.1.99.1.1.1" # entPhySensorEntry
    [[inputs.snmp.table.field]]
      name = "entPhySensorType"
      oid  = "1.3.6.1.2.1.99.1.1.1.1"
    [[inputs.snmp.table.field]]
      name = "entPhySensorScale"
      oid  = "1.3.6.1.2.1.99.1.1.1.2"
    [[inputs.snmp.table.field]]
      name = "entPhySensorPrecision"
      oid  = "1.3.6.1.2.1.99.1.1.1.3"
    [[inputs.snmp.table.field]]
      name = "entPhySensorValue"
      oid  = "1.3.6.1.2.1.99.1.1.1.4"
    [[inputs.snmp.table.field]]
      name = "entPhySensorOperStatus"
      oid  = "1.3.6.1.2.1.99.1.1.1.6"
    [[inputs.snmp.table.field]]
      name = "entPhySensorUnitsDisplay"
      oid  = "1.3.6.1.2.1.99.1.1.1.7"
